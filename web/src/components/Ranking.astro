---
import type { RankingItem } from '@lib/strapi';

const { title, items } = Astro.props as { title: string; items: RankingItem[] };
const hasItems = Array.isArray(items) && items.length > 0;
---
<section class="ranking-card" aria-labelledby={`ranking-${title}`}>
  <header class="ranking-header">
    <h2 id={`ranking-${title}`} class="section-title">{title}</h2>
    <p class="ranking-subtitle muted">直近の閲覧・クリック・シェアをもとにしたランキング</p>
  </header>
  {hasItems ? (
    <ol class="ranking-list">
      {items.map((item, index) => (
        <li class="ranking-item">
          <span class="ranking-index" aria-hidden="true">{index + 1}</span>
          <div class="ranking-content">
            <a class="ranking-title" href={`/posts/${item.slug}/`}>{item.title}</a>
            <span class="ranking-score muted">トレンドスコア {item.score}</span>
          </div>
        </li>
      ))}
    </ol>
  ) : (
    <p class="ranking-empty muted">ランキングデータがまだ集計されていません。</p>
  )}
</section>
