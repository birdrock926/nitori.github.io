---
import type { Post } from '@lib/strapi';
import { formatDateTime, relative } from '@lib/format';

const { featured, secondary } = Astro.props as { featured: Post; secondary: Post[] };
---
<section class="hero-section">
  <article class="hero-feature card">
    <p class="hero-eyebrow">注目トピック</p>
    <h1 id="hero-heading" class="hero-title gradient-text">{featured.title}</h1>
    <p class="hero-summary muted">{featured.summary}</p>
    <div class="hero-meta">
      <time dateTime={featured.publishedAt} class="muted">
        {formatDateTime(featured.publishedAt)}（{relative(featured.publishedAt)}）
      </time>
      {featured.tags.slice(0, 3).map((tag) => (
        <a class="tag-chip" href={`/tags/${tag.slug}/`}>{tag.name}</a>
      ))}
    </div>
    <a class="button-primary" href={`/posts/${featured.slug}/`} aria-label={`記事「${featured.title}」へ移動`}>
      続きを読む
    </a>
  </article>
  <aside class="hero-secondary" aria-label="注目のサブトピック">
    {secondary.map((post) => (
      <article class="hero-secondary-card card" data-variant="compact">
        <div class="hero-secondary-meta">
          <time dateTime={post.publishedAt} class="muted">
            {formatDateTime(post.publishedAt)}
          </time>
          {post.tags[0] && <a class="tag-chip" href={`/tags/${post.tags[0].slug}/`}>{post.tags[0].name}</a>}
        </div>
        <h2 class="hero-secondary-title"><a href={`/posts/${post.slug}/`}>{post.title}</a></h2>
        <p class="hero-secondary-summary muted">{post.summary}</p>
      </article>
    ))}
  </aside>
</section>
