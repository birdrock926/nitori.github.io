---
import ThemeToggle from '@components/ThemeToggle.tsx';
import { SITE_TITLE } from '@config/site';
import { getTags } from '@lib/strapi';

const tags = await getTags();
---
<header class="site-header" role="banner">
  <div class="site-header__inner">
    <div class="header-bar glass-panel">
      <a class="brand" href="/" aria-label="{SITE_TITLE} トップへ">
        <span class="brand-icon" aria-hidden="true">
          <svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" focusable="false" role="img">
            <defs>
              <linearGradient id="header-mark" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="var(--accent)" />
                <stop offset="100%" stop-color="var(--accent-strong)" />
              </linearGradient>
            </defs>
            <rect x="1.5" y="1.5" width="29" height="29" rx="8" fill="url(#header-mark)" opacity="0.9" />
            <path
              d="M14.5 6.5h6.6l-3.6 7.9h4.3l-10.5 11.6 2.8-8.7H10L14.5 6.5Z"
              fill="var(--layer-raised)"
              stroke="var(--layer-elevated)"
              stroke-width="0.8"
              stroke-linejoin="round"
            />
          </svg>
        </span>
        <span class="brand-text">
          <span class="brand-title">{SITE_TITLE}</span>
          <span class="brand-subtitle">ゲームトレンドを最速キャッチ</span>
        </span>
      </a>
      <nav class="header-actions" aria-label="主要アクション">
        <a href="/search" class="ghost-button ghost-button--icon" aria-label="検索ページへ">
          <span class="ghost-button__icon" aria-hidden="true">
            <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" focusable="false" role="img">
              <path
                d="m15.5 14.4 3.1 3.1-1.1 1.1-3.1-3.1a7.5 7.5 0 1 1 1.1-1.1Zm-6 1.1a5.6 5.6 0 1 0 0-11.2 5.6 5.6 0 0 0 0 11.2Z"
                fill="currentColor"
              />
            </svg>
          </span>
          <span class="ghost-button__label">検索</span>
        </a>
        <a href="/tags/" class="ghost-button ghost-button--icon" aria-label="タグ一覧へ">
          <span class="ghost-button__icon" aria-hidden="true">
            <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" focusable="false" role="img">
              <path
                d="M9.2 2.5h8.3l.7.7v8.3l-7.8 7.8L2 10.9V2.5Zm.8 1.6H3.6v6.1l7.2 7.2 6.2-6.2V4.1H10Zm-2.5 3.6a1.6 1.6 0 1 1 3.3 0 1.6 1.6 0 0 1-3.3 0Z"
                fill="currentColor"
              />
            </svg>
          </span>
          <span class="ghost-button__label">タグ</span>
        </a>
        <ThemeToggle client:load />
      </nav>
    </div>
    {tags.length > 0 && (
      <div class="tag-scroll" aria-label="人気タグ">
        {tags.slice(0, 10).map((tag) => (
          <a class="tag-chip" href={`/tags/${tag.slug}/`}>{tag.name}</a>
        ))}
      </div>
    )}
  </div>
</header>
